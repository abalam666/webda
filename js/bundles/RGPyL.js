var pageComponent=webpackJsonppageComponent([20],{139:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),u=o(a),s=n(1),c=o(s);n(3),n(4),n(5),n(6),n(7),n(8),n(9);var p=n(140),d=o(p),h=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),t}(u.default);c.default.register(h,d.default),t.default=h},140:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.templates=t.RGPyL=void 0;var a,u=n(0),s=o(u),c=n(1),p=o(c);goog.loadModule(function(e){function t(e,t,o){var a=function(){r("h6");var t=e.page.description;"function"==typeof t?t():null!=t&&l(t),i("h6"),r("article",null,null,"id","1"),r("h2"),l("Installation"),i("h2"),r("p"),l("You first need to install webda-shell."),i("p"),u({code:"npm install -g webda-shell",mode:"shell"},null,o),r("p"),l("This will install the webda shell tools, that allows you to configure and deploy your project You have the configuration UI available, where you can create a service, use a service, or create a custom API resource. You can also manually edit the webda.config.json if you prefer"),i("p"),r("p"),l("Below is the manual step with the manual modification, I would recommand to use the configuration UI to modify the webda.config.json"),i("p"),i("article"),r("article",null,null,"id","2"),r("h2"),l("Init a project"),i("h2"),r("p"),l("Create a new project folder"),i("p"),u({code:"mkdir my-new-project\ncd my-new-project",mode:"shell"},null,o),r("p"),l("If you do want to use our sample project, first type"),i("p"),u({code:"webda init",mode:"shell"},null,o),r("p"),l("Launch your project configuration interface"),i("p"),u({code:"webda config",mode:"shell"},null,o),r("p"),l("You should now see the configuration website in your browser"),i("p"),i("article"),r("article",null,null,"id","3"),r("h2"),l("Create a new route"),i("h2"),r("p"),l("We will use the inline RouteHelper here, except the Lambda Route helper, the other are mainly helper for quick and easy test but you should use Service when you can as they are easier to unit test and make code cleaner."),i("p"),u({code:'{\n  "*": "demo.webda.io",\n  "demo.webda.io": {\n    ...\n    "/myurl": {\n      "type": "inline",\n      "callback": "function(ctx) { ctx.write(\'I am an inline route\'); }"\n    }\n  }\n}',mode:"javascript"},null,o),r("p"),l("This is defining the GET /myurl API"),i("p"),r("p"),l("There is 5 types of route : file, inline, lambda, resource, string"),i("p"),r("h3"),l("File route"),i("h3"),r("p"),r("strong"),l("file"),i("strong"),l(" include the javascript file and call its main export with the context"),i("p"),r("p"),l("webda.config.json"),i("p"),u({code:'{\n  "*": "demo.webda.io",\n  "demo.webda.io": {\n    ...\n    "/myapi": {\n      "type": "file",\n      "file": "./test.js"\n    }\n  }\n}',mode:"javascript"},null,o),r("p"),l("test.js"),i("p"),u({code:"module.exports = (ctx) {\n  ctx.write('This is my custom API')\n}",mode:"javascript"},null,o),r("h3"),l("Inline route"),i("h3"),r("p"),r("strong"),l("inline"),i("strong"),l(" eval the content of the callback string"),i("p"),u({code:'{\n  "*": "demo.webda.io",\n  "demo.webda.io": {\n    ...\n    "/myurl": {\n      "type": "inline",\n      "callback": "function(ctx) { ctx.write(\'I am an inline route\'); }"\n    }\n  }\n}',mode:"javascript"},null,o),r("h3"),l("Lambda route"),i("h3"),r("p"),r("strong"),l("lambda"),i("strong"),l(" call a Lambda function and return its result"),i("p"),r("h3"),l("Resource route"),i("h3"),r("p"),r("strong"),l("resource"),i("strong"),l(" return the content of the file, guessing it's mime type"),i("p"),u({code:'{\n  "*": "demo.webda.io",\n  "demo.webda.io": {\n    ...\n    "/myurl": {\n      "type": "resource",\n      "file": "./test.jpg"\n    }\n  }\n}',mode:"javascript"},null,o),r("p"),l("This will return the jpeg with image/jpeg mime type"),i("p"),r("h3"),l("String route"),i("h3"),r("p"),r("strong"),l("string"),i("strong"),l(" return the content of result, you can specify the mime"),i("p"),u({code:'{\n  "*": "demo.webda.io",\n  "demo.webda.io": {\n    ...\n    "/myurl": {\n      "type": "string",\n      "result": "Hi Webda !"\n    }\n  }\n}',mode:"javascript"},null,o),r("p"),l('This will return a "Hi Webda !"'),i("p"),i("article"),r("article",null,null,"id","4"),r("h2"),l("Create a new service"),i("h2"),r("p"),l("We will create a new service from executor, so we can map some urls directly to the service"),i("p"),u({code:'const Executor = require(\'webda/services/executor\')\n\nclass MyService extends Executor {\n\n   init(config) {\n     // Let\'s add our routes here, for Modda the URL should be dynamic\n     config[\'/myservice\'] = {\n                              method:["GET", "DELETE"],\n                              _method: this.handleRequest,\n                              executor: this\n                            };\n     // This will declare two routes\n     // GET /myservice\n     // DELETE /myservice\n   }\n   \n   delete(ctx) {\n     // If we dont output anything, then the default result will be a 204\n   }    \n   \n   get(ctx) {\n    // Should output : I am a getter and i\'ve sent an welcome email to you\n    // The _params object is passed from the configuration file\n    // You will see below the configuration file with the sentence attribute defined\n    ctx.write(this._params.sentence);\n    let otherService = this.getService("Mailer");\n    otherService.send();\n   }\n   \n   handleRequest(ctx) {\n     // As we redirect both GET and DELETE to handleRequest, we filter here\n     if (ctx._route._http.method === "GET") {\n        this.get(ctx);\n     } else {\n        this.delete(ctx);\n     }\n   }\n}',mode:"javascript"},null,o),r("p"),l("Here is the corresponding configuration"),i("p"),u({code:'{\n  ...\n  services: {\n     ...\n     "MyService": {\n       require: "./myservice.js",\n       sentence: "I am a GET route and i\'ve sent an welcome email to you"\n     }\n     ...\n  }\n  ...\n}',mode:"javascript"},null,o),i("article"),r("article",null,null,"id","5"),r("h2"),l("Run it"),i("h2"),u({code:"webda serve",mode:"text"},null,o),r("p"),l("You can call the http://localhost:18080/myservice, and see the nice output"),i("p"),r("p"),l('"I am a GET route and i\'ve sent an welcome email to you"'),i("p"),r("p"),l("And then the http://localhost:18080/myurl"),i("p"),r("p"),l('"I am a inline route"'),i("p"),i("article"),r("input",null,null,"type","hidden","value",e.page.title),i("input"),r("input",null,null,"type","hidden","value",e.site.title),i("input")};s(n.$$assignDefaults({content:a},e),null,o)}goog.module("RGPyL.incrementaldom");var n=goog.require("soy");goog.require("soydata");goog.require("goog.asserts"),goog.require("soy.asserts"),goog.require("goog.i18n.bidi"),goog.require("goog.string");var o=goog.require("incrementaldom"),r=o.elementOpen,i=o.elementClose,l=(o.elementVoid,o.elementOpenStart,o.elementOpenEnd,o.text),u=(o.attr,p.default.getTemplate("ElectricCode.incrementaldom","render")),s=p.default.getTemplate("guide.incrementaldom","render");return e.render=t,goog.DEBUG&&(t.soyTemplateName="RGPyL.render"),e.render.params=["page","site"],e.render.types={page:"?",site:"?"},e.templates=a=e,e});var d=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),t}(s.default);p.default.register(d,a),t.RGPyL=d,t.templates=a,t.default=a}},[139]);